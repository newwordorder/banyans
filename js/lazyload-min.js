!function(t){"function"==typeof define&&define.amd?define(t):t()}(function(){"use strict";var t;t=function(){function t(t,e){var o=this;this.container=t,this.observers=[],this.lastX=0,this.lastY=0;var n=!1,i=function t(){n||(n=!0,requestAnimationFrame(function(){for(var t=o.observers,e=o.getState(),i=t.length;i--;)t[i].check(e);o.lastX=e.positionX,o.lastY=e.positionY,n=!1}))},r=e.handleScrollResize,s=this.handler=r?r(i):i;addEventListener("scroll",s,!0),addEventListener("resize",s,!0),addEventListener("DOMContentLoaded",function(){(o.mutationObserver=new MutationObserver(i)).observe(document,{attributes:!0,childList:!0,subtree:!0})})}function e(t){return this.offset=~~t.offset||0,this.container=t.container||document.body,this.once=Boolean(t.once),this.observerCollection=t.observerCollection||c,this.activate()}function o(t){for(var e=arguments.length,n=Array(e);e--;)n[e]=arguments[e];if(void 0===t&&(t={}),!(this instanceof o))return new(Function.prototype.bind.apply(o,[null].concat(n)));this.viewports=new Map,this.handleScrollResize=t.handleScrollResize}function n(t){for(var o=arguments.length,i=Array(o);o--;)i[o]=arguments[o];if(void 0===t&&(t={}),!(this instanceof n))return new(Function.prototype.bind.apply(n,[null].concat(i)));this.onTop=t.onTop,this.onBottom=t.onBottom,this.onLeft=t.onLeft,this.onRight=t.onRight,this.onMaximized=t.onMaximized,this._wasTop=!0,this._wasBottom=!1,this._wasLeft=!0,this._wasRight=!1;var r=e.call(this,t);this.check(r.getState())}function i(t,o){for(var n=arguments.length,r=Array(n);n--;)r[n]=arguments[n];if(void 0===o&&(o={}),!(this instanceof i))return new(Function.prototype.bind.apply(i,[null].concat(r)));this.element=t,this.onEnter=o.onEnter,this.onExit=o.onExit,this._didEnter=!1;var c=e.call(this,o);s(t)&&this.check(c.getState())}function r(t,e,o,n){var i,r,s,c,a=t.getBoundingClientRect();if(!a.width||!a.height)return!1;var h=window.innerWidth,l=window.innerHeight,f=h;if(n===document.body)i=l,r=0,s=f,c=0;else{if(!(a.top<l&&a.bottom>0&&a.left<f&&a.right>0))return!1;var d=n.getBoundingClientRect();i=d.bottom,r=d.top,s=d.right,c=d.left}return a.top<i+e&&a.bottom>r-e&&a.left<s+e&&a.right>c-e}function s(t){return t&&t.parentNode}t.prototype={getState:function t(){var e,o,n,i,r=this.container,s=this.lastX,c=this.lastY;return r===document.body?(e=window.innerWidth,o=window.innerHeight,n=window.pageXOffset,i=window.pageYOffset):(e=r.offsetWidth,o=r.offsetHeight,n=r.scrollLeft,i=r.scrollTop),{width:e,height:o,positionX:n,positionY:i,directionX:s<n?"right":s>n?"left":"none",directionY:c<i?"down":c>i?"up":"none"}},destroy:function t(){var e=this.handler,o=this.mutationObserver;removeEventListener("scroll",e),removeEventListener("resize",e),o&&o.disconnect()}},e.prototype={activate:function e(){var o=this.container,n=this.observerCollection,i=n.viewports,r=i.get(o);r||(r=new t(o,n),i.set(o,r));var s=r.observers;return s.indexOf(this)<0&&s.push(this),r},destroy:function t(){var e=this.container,o=this.observerCollection.viewports,n=o.get(e);if(n){var i=n.observers,r=i.indexOf(this);r>-1&&i.splice(r,1),i.length||(n.destroy(),o.delete(e))}}};var c=new o,a;n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.check=function(t){var e=this,o=e.onTop,n=e.onBottom,i=e.onLeft,r=e.onRight,s=e.onMaximized,c=e._wasTop,a=e._wasBottom,h=e._wasLeft,l=e._wasRight,f=e.container,d=e.offset,u=e.once,p=f.scrollHeight,v=f.scrollWidth,g=t.width,w=t.height,y=t.positionX,m=t.positionY,b=m-d<=0,E=p>w&&w+m+d>=p,_=y-d<=0,L=v>g&&g+y+d>=v,R=!1;n&&!a&&E?n.call(this,f,t):o&&!c&&b?o.call(this,f,t):r&&!l&&L?r.call(this,f,t):i&&!h&&_?i.call(this,f,t):s&&p===w?s.call(this,f,t):R=!0,u&&!R&&this.destroy(),this._wasTop=b,this._wasBottom=E,this._wasLeft=_,this._wasRight=L},i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.prototype.check=function(t){var e=this.container,o=this.onEnter,n=this.onExit,i=this.element,c=this.offset,a=this.once,h=this._didEnter;if(!s(i))return this.destroy();var l=r(i,c,t,e);!h&&l?(this._didEnter=!0,o&&(o.call(this,i,t),a&&this.destroy())):h&&!l&&(this._didEnter=!1,n&&(n.call(this,i,t),a&&this.destroy()))},function t(){var e,o;document.querySelectorAll("img").forEach(function(t){console.log(t);var e=i(t,{onEnter:function t(e,o){var n=e.dataset.src;n&&(e.src=n)},offset:100,once:!0})}),document.querySelectorAll(".background-image-holder").forEach(function(t){var e=i(t,{onEnter:function t(e,o){var n,i=e.querySelector("img").dataset.src;i&&(e.style.background='url("'+i+'")'),e.style.opacity=1},offset:100,once:!0})})}()},"function"==typeof define&&define.amd?define(t):t()});